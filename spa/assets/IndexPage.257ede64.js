import{d as H,b as O}from"./QBtn.a7e16a37.js";import{Q as G}from"./QPage.47656508.js";import{c as S,r as c,q as I,o as J,h as v,T as K,g as W,B as L,C as Y,D as q,K as D,P as X,O as Z,E as U,F as T,H as $,I as _,L as x,J as ee,M as z,Y as te,a as ae,G as ne,N as oe}from"./index.5e0d6ce9.js";import{c as j,a as A}from"./render.5082e1c5.js";import{u as re,a as se}from"./use-dark.cb3c68ad.js";import{u as E}from"./pokemon.store.a9dbb73b.js";import{u as F}from"./user.store.4c11baf6.js";import{api as B}from"./axios.1162aade.js";const le={ratio:[String,Number]};function ie(e,l){return S(()=>{const n=Number(e.ratio||(l!==void 0?l.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const ue=16/9;var ce=j({name:"QImg",props:{...le,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ue},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:l,emit:n}){const y=c(e.initialRatio),f=ie(e,y);let a=null,o=!1;const r=[c(null),c(m())],i=c(0),d=c(!1),g=c(!1),C=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),N=S(()=>({width:e.width,height:e.height})),k=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),h=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));I(()=>u(),s);function u(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function m(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function s(t){a!==null&&(clearTimeout(a),a=null),g.value=!1,t===null?(d.value=!1,r[i.value^1].value=m()):d.value=!0,r[i.value].value=t}function Q({target:t}){o!==!0&&(a!==null&&(clearTimeout(a),a=null),y.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,b(t,1))}function b(t,P){o===!0||P===1e3||(t.complete===!0?p(t):a=setTimeout(()=>{a=null,b(t,P+1)},50))}function p(t){o!==!0&&(i.value=i.value^1,r[i.value].value=null,d.value=!1,g.value=!1,n("load",t.currentSrc||t.src))}function V(t){a!==null&&(clearTimeout(a),a=null),d.value=!1,g.value=!0,r[i.value].value=null,r[i.value^1].value=m(),n("error",t)}function R(t){const P=r[t].value,w={key:"img_"+t,class:k.value,style:h.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...P};return i.value===t?(w.class+=" q-img__image--waiting",Object.assign(w,{onLoad:Q,onError:V})):w.class+=" q-img__image--loaded",v("div",{class:"q-img__container absolute-full",key:"img"+t},v("img",w))}function M(){return d.value!==!0?v("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},A(l[g.value===!0?"error":"default"])):v("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},l.loading!==void 0?l.loading():e.noSpinner===!0?void 0:[v(H,{color:e.spinnerColor,size:e.spinnerSize})])}return s(u()),J(()=>{o=!0,a!==null&&(clearTimeout(a),a=null)}),()=>{const t=[];return f.value!==null&&t.push(v("div",{key:"filler",style:f.value})),g.value!==!0&&(r[0].value!==null&&t.push(R(0)),r[1].value!==null&&t.push(R(1))),t.push(v(K,{name:"q-transition--fade"},M)),v("div",{class:C.value,style:N.value,role:"img","aria-label":e.alt},t)}}}),de=j({name:"QCard",props:{...re,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:l}){const{proxy:{$q:n}}=W(),y=se(e,n),f=S(()=>"q-card"+(y.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>v(e.tag,{class:f.value},A(l.default))}});const ge={class:"container-grid"},me={class:"absolute-bottom text-h6",id:"bg-title-card"},fe={class:"text-subtitle1 q-mb-none"},ve=L({__name:"PokeCard",setup(e){const l=F(),n=E();return(y,f)=>{const a=Y("router-link");return q(),D("div",ge,[(q(!0),D(X,null,Z(_(n).getPokeData,o=>(q(),U(de,{key:o.id,class:"my-card"},{default:T(()=>[$(a,{onClick:f[0]||(f[0]=r=>_(l).changeNavbar(!1)),to:`/details/${o.name}`},{default:T(()=>[$(ce,{src:o.sprites.front_default,alt:o.name},{default:T(()=>[x("div",me,[ee(z(o.name.charAt(0).toUpperCase()+o.name.slice(1))+" ",1),x("p",fe,z(o.types[0].type.name.charAt(0).toUpperCase()+o.types[0].type.name.slice(1)),1)])]),_:2},1032,["src","alt"])]),_:2},1032,["to"])]),_:2},1024))),128))])}}}),he=x("h5",{class:"text-negative"}," Tenemos mas de 1000 pokemones con todas sus evoluciones!! ",-1),ye={class:"text-center"},_e={key:0,class:"text-negative q-mt-md q-mb-none"},Be=L({__name:"IndexPage",setup(e){const l=ne(),n=E(),{category:y}=te(n),f=F();let a=c(0);const o=c(20);let r=c(!1),i=c(!1),d=c("");const g=c([]),C=async h=>{for(let u of h){const m=u.pokemon||u,{data:s}=await B.get(`pokemon/${m.name}`);n.addPokeData({name:s.name,baseExperience:s.base_experience,abilities:s.abilities,forms:s.forms,id:s.id,sprites:s.sprites,stats:s.sprites,types:s.types})}},N=async()=>{r.value=!0,a.value+=20,k(),r.value=!1},k=async h=>{i.value=!1,d.value="",h&&n.cleanPokeData();const u=n.getCategoryUrl;if(!u){const{data:p}=await B.get(`pokemon?limit=${o.value}&offset=${a.value}`);C(p.results);return}const m=u.split("/"),s=[m[m.length-3],m[m.length-2]].join("/");if(!g.value.length){const{data:p}=await B.get(`${s}/`);g.value=p.pokemon}const b=[...g.value].slice(a.value,o.value+a.value);b.length<20&&(i.value=!0,d.value="No tenemos Pokemos para mostrar \u{1F62D}"),C(b)};return I(y,()=>{g.value=[],a.value=0,k(!0)}),ae(async()=>{if(f.getUserLog.name||l.push("/login"),!n.getPokeData.length){const h=await B.get("type");for(let u of h.data.results)n.addPokeTypes(u.name,u.url);k(!0)}}),(h,u)=>(q(),U(G,{padding:""},{default:T(()=>[he,$(ve),x("div",ye,[_(d)?(q(),D("h5",_e,z(_(d)),1)):oe("",!0),$(O,{disable:_(r)||_(i),loading:_(r),onClick:N,class:"q-mt-lg",color:"negative",label:"Ver mas"},null,8,["disable","loading"])])]),_:1}))}});export{Be as default};
